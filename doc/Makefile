.PHONY: clean html include doc

doc: html

clean:
	rm -rf include
	rm -f  *.pdf *.html *.info
	rm -f *.aux *.cp *.fn *.fns *.ky *.log *.pg *.toc *.tp *.tps *.vr

include:
	sbcl \
	--eval '(let ((asdf:*central-registry* (cons #p"../" asdf:*central-registry*))) (require :pileup))' \
        --load docstrings.lisp \
	--eval '(sb-texinfo:generate-includes "include/" (list :pileup) :base-package :pileup)' \
	--eval '(quit)'

html: include
	makeinfo --html --no-split --css=style.css pileup.texinfo

